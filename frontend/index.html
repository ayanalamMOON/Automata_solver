<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automata Solver | Interactive Visual Tool</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    <div class="page-container">
        <header>
            <div class="logo-container">
                <i class="fas fa-project-diagram logo-icon"></i>
                <h1>Automata Solver</h1>
            </div>
            <nav>
                <button id="theme-toggle" class="theme-toggle" title="Toggle dark/light mode">
                    <i class="fas fa-moon"></i>
                </button>
                <button id="help-button" class="help-button" title="Help">
                    <i class="fas fa-question-circle"></i>
                </button>
            </nav>
        </header>

        <div class="toolbar">
            <button id="new-project" class="toolbar-btn" title="New Project">
                <i class="fas fa-file"></i> New
            </button>
            <button id="save-project" class="toolbar-btn" title="Save Project">
                <i class="fas fa-save"></i> Save
            </button>
            <button id="export-btn" class="toolbar-btn" title="Export">
                <i class="fas fa-download"></i> Export
            </button>
            <div class="toolbar-separator"></div>
            <button id="example-automata" class="toolbar-btn" title="Example Automata">
                <i class="fas fa-lightbulb"></i> Examples
            </button>
        </div>

        <main>
            <div class="app-container">
                <div class="panel input-panel">
                    <div class="panel-header">
                        <h2><i class="fas fa-keyboard"></i> Input</h2>
                        <div class="panel-controls">
                            <button id="input-panel-toggle" class="panel-toggle" title="Toggle panel">
                                <i class="fas fa-chevron-up"></i>
                            </button>
                        </div>
                    </div>
                    <div class="panel-content">
                        <div class="tabs">
                            <button class="tab-btn active" data-tab="regex">Regex</button>
                            <button class="tab-btn" data-tab="formal">Formal Definition</button>
                            <button class="tab-btn" data-tab="visual">Visual Editor</button>
                            <button class="tab-btn" data-tab="image">Image Upload</button>
                        </div>
                        
                        <div class="tab-content" id="regex-tab">
                            <div class="input-group">
                                <label for="regex-input">Regular Expression:</label>
                                <input type="text" id="regex-input" placeholder="Enter regex (e.g., a(b|c)*)" />
                            </div>
                            <div class="action-buttons">
                                <button id="validate-regex" class="action-btn">
                                    <i class="fas fa-check-circle"></i> Validate
                                </button>
                                <button id="convert-regex" class="action-btn primary">
                                    <i class="fas fa-cogs"></i> Convert to Automaton
                                </button>
                            </div>
                        </div>
                        
                        <div class="tab-content hidden" id="formal-tab">
                            <div class="formal-definition-builder">
                                <div class="input-group">
                                    <label>States (comma separated):</label>
                                    <input type="text" id="states-input" placeholder="q0, q1, q2..." />
                                </div>
                                <div class="input-group">
                                    <label>Alphabet (comma separated):</label>
                                    <input type="text" id="alphabet-input" placeholder="a, b, c..." />
                                </div>
                                <div class="input-group">
                                    <label>Initial State:</label>
                                    <select id="initial-state-select">
                                        <option value="">Select a state</option>
                                    </select>
                                </div>
                                <div class="input-group">
                                    <label>Final States:</label>
                                    <div id="final-states-checkboxes" class="checkbox-group">
                                        <!-- Will be populated dynamically -->
                                    </div>
                                </div>
                                <div class="input-group">
                                    <label>Transitions:</label>
                                    <div id="transitions-builder" class="transitions-builder">
                                        <div class="transition-row">
                                            <select class="from-state">
                                                <option value="">From</option>
                                            </select>
                                            <select class="input-symbol">
                                                <option value="">Input</option>
                                            </select>
                                            <select class="to-state">
                                                <option value="">To</option>
                                            </select>
                                            <button class="add-transition"><i class="fas fa-plus"></i></button>
                                        </div>
                                    </div>
                                </div>
                                <div class="action-buttons">
                                    <button id="build-automaton" class="action-btn primary">
                                        <i class="fas fa-hammer"></i> Build Automaton
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="tab-content hidden" id="visual-tab">
                            <div class="visual-editor">
                                <div class="canvas-container">
                                    <canvas id="visual-editor-canvas"></canvas>
                                </div>
                                <div class="editor-tools">
                                    <button class="tool-btn" data-tool="state">
                                        <i class="fas fa-circle"></i> Add State
                                    </button>
                                    <button class="tool-btn" data-tool="transition">
                                        <i class="fas fa-arrow-right"></i> Add Transition
                                    </button>
                                    <button class="tool-btn" data-tool="delete">
                                        <i class="fas fa-trash"></i> Delete
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="tab-content hidden" id="image-tab">
                            <div class="image-upload-container">
                                <div class="dropzone" id="image-dropzone">
                                    <i class="fas fa-cloud-upload-alt dropzone-icon"></i>
                                    <p>Drag & drop an image or click to browse</p>
                                    <input type="file" id="image-upload" accept="image/*" hidden>
                                </div>
                                <div class="uploaded-image-preview hidden">
                                    <img id="uploaded-image" src="" alt="Uploaded automaton image">
                                    <button id="remove-image" class="remove-btn">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div class="action-buttons">
                                    <button id="process-image" class="action-btn primary">
                                        <i class="fas fa-magic"></i> Process Image
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="panel output-panel">
                    <div class="panel-header">
                        <h2><i class="fas fa-project-diagram"></i> Automaton Visualization</h2>
                        <div class="panel-controls">
                            <button id="fullscreen-btn" class="panel-control-btn" title="Fullscreen">
                                <i class="fas fa-expand"></i>
                            </button>
                            <button id="output-panel-toggle" class="panel-toggle" title="Toggle panel">
                                <i class="fas fa-chevron-up"></i>
                            </button>
                        </div>
                    </div>
                    <div class="panel-content">
                        <div class="visualization-container">
                            <div id="automaton-graph" class="graph-container">
                                <div class="empty-state">
                                    <i class="fas fa-project-diagram empty-icon"></i>
                                    <p>Convert a regex or build an automaton to see the visualization</p>
                                </div>
                            </div>
                            <div class="visualization-tools">
                                <button id="zoom-in" class="tool-btn" title="Zoom In">
                                    <i class="fas fa-search-plus"></i>
                                </button>
                                <button id="zoom-out" class="tool-btn" title="Zoom Out">
                                    <i class="fas fa-search-minus"></i>
                                </button>
                                <button id="reset-zoom" class="tool-btn" title="Reset View">
                                    <i class="fas fa-expand-arrows-alt"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="panel info-panel">
                    <div class="panel-header">
                        <h2><i class="fas fa-info-circle"></i> Information</h2>
                        <div class="panel-controls">
                            <button id="info-panel-toggle" class="panel-toggle" title="Toggle panel">
                                <i class="fas fa-chevron-up"></i>
                            </button>
                        </div>
                    </div>
                    <div class="panel-content">
                        <div class="tabs">
                            <button class="tab-btn active" data-tab="details">Details</button>
                            <button class="tab-btn" data-tab="test">Test Strings</button>
                            <button class="tab-btn" data-tab="explanation">Explanation</button>
                        </div>
                        
                        <div class="tab-content" id="details-tab">
                            <div class="automaton-properties">
                                <div class="property">
                                    <span class="property-label">Type:</span>
                                    <span class="property-value" id="automaton-type">-</span>
                                </div>
                                <div class="property">
                                    <span class="property-label">States:</span>
                                    <span class="property-value" id="automaton-states">-</span>
                                </div>
                                <div class="property">
                                    <span class="property-label">Alphabet:</span>
                                    <span class="property-value" id="automaton-alphabet">-</span>
                                </div>
                                <div class="property">
                                    <span class="property-label">Initial State:</span>
                                    <span class="property-value" id="automaton-initial">-</span>
                                </div>
                                <div class="property">
                                    <span class="property-label">Final States:</span>
                                    <span class="property-value" id="automaton-final">-</span>
                                </div>
                            </div>
                            <div class="action-buttons">
                                <button id="minimize-automaton" class="action-btn">
                                    <i class="fas fa-compress-arrows-alt"></i> Minimize
                                </button>
                                <button id="complement-automaton" class="action-btn">
                                    <i class="fas fa-exchange-alt"></i> Complement
                                </button>
                            </div>
                        </div>
                        
                        <div class="tab-content hidden" id="test-tab">
                            <div class="test-strings-container">
                                <div class="input-group">
                                    <label for="test-string">Test String:</label>
                                    <div class="test-input-group">
                                        <input type="text" id="test-string" placeholder="Enter a string to test...">
                                        <button id="test-string-btn">Test</button>
                                    </div>
                                </div>
                                <div class="test-result hidden">
                                    <div class="test-result-icon">
                                        <i class="fas fa-check-circle success-icon hidden"></i>
                                        <i class="fas fa-times-circle error-icon hidden"></i>
                                    </div>
                                    <p id="test-result-text"></p>
                                </div>
                                <div class="test-history">
                                    <h4>Test History</h4>
                                    <ul id="test-history-list">
                                        <!-- Will be populated dynamically -->
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="tab-content hidden" id="explanation-tab">
                            <div class="explanation-container">
                                <div class="loading-spinner hidden" id="explanation-loader">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    <span>Generating explanation...</span>
                                </div>
                                <div id="explanation-content">
                                    <div class="empty-state">
                                        <i class="fas fa-lightbulb empty-icon"></i>
                                        <p>Generate an automaton to see an explanation</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <div id="export-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Export Automaton</h3>
                    <button class="close-modal"><i class="fas fa-times"></i></button>
                </div>
                <div class="modal-body">
                    <div class="export-options">
                        <div class="option-group">
                            <h4>Format</h4>
                            <div class="radio-group">
                                <label>
                                    <input type="radio" name="export-format" value="svg" checked>
                                    <span>SVG</span>
                                </label>
                                <label>
                                    <input type="radio" name="export-format" value="png">
                                    <span>PNG</span>
                                </label>
                                <label>
                                    <input type="radio" name="export-format" value="pdf">
                                    <span>PDF</span>
                                </label>
                            </div>
                        </div>
                        <div class="option-group">
                            <h4>Include</h4>
                            <div class="checkbox-group">
                                <label>
                                    <input type="checkbox" name="export-include" value="details" checked>
                                    <span>Automaton Details</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="export-include" value="explanation">
                                    <span>Explanation</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn">Cancel</button>
                    <button id="download-btn" class="primary-btn">Download</button>
                </div>
            </div>
        </div>

        <div id="examples-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Example Automata</h3>
                    <button class="close-modal"><i class="fas fa-times"></i></button>
                </div>
                <div class="modal-body">
                    <div class="examples-grid">
                        <div class="example-card" data-example="a(b|c)*">
                            <div class="example-preview">
                                <i class="fas fa-project-diagram"></i>
                            </div>
                            <div class="example-info">
                                <h4>Strings starting with 'a' followed by any number of 'b' or 'c'</h4>
                                <code>a(b|c)*</code>
                            </div>
                        </div>
                        <div class="example-card" data-example="(ab)*">
                            <div class="example-preview">
                                <i class="fas fa-project-diagram"></i>
                            </div>
                            <div class="example-info">
                                <h4>Strings with repeated 'ab' pattern</h4>
                                <code>(ab)*</code>
                            </div>
                        </div>
                        <div class="example-card" data-example="a*b*">
                            <div class="example-preview">
                                <i class="fas fa-project-diagram"></i>
                            </div>
                            <div class="example-info">
                                <h4>Strings with any number of 'a's followed by any number of 'b's</h4>
                                <code>a*b*</code>
                            </div>
                        </div>
                        <div class="example-card" data-example="(a|b)*abb">
                            <div class="example-preview">
                                <i class="fas fa-project-diagram"></i>
                            </div>
                            <div class="example-info">
                                <h4>Strings ending with 'abb'</h4>
                                <code>(a|b)*abb</code>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="help-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Help & Documentation</h3>
                    <button class="close-modal"><i class="fas fa-times"></i></button>
                </div>
                <div class="modal-body">
                    <div class="help-tabs">
                        <button class="help-tab active" data-tab="getting-started">Getting Started</button>
                        <button class="help-tab" data-tab="regex-syntax">Regex Syntax</button>
                        <button class="help-tab" data-tab="features">Features</button>
                        <button class="help-tab" data-tab="about">About</button>
                    </div>
                    <div class="help-content" id="getting-started-help">
                        <h4>Getting Started with Automata Solver</h4>
                        <p>Welcome to Automata Solver, an interactive tool for working with automata and regular expressions!</p>
                        <ol>
                            <li><strong>Input a Regular Expression</strong> in the Input panel</li>
                            <li>Click <strong>Convert to Automaton</strong> to visualize it</li>
                            <li>Explore the visualization in the center panel</li>
                            <li>Use the Information panel to see details and test strings</li>
                        </ol>
                    </div>
                    <!-- Other help tabs content would go here -->
                </div>
            </div>
        </div>

        <div id="toast-container"></div>
    </div>

    <footer>
        <p>&copy; 2025 Automata Solver | <a href="#" id="privacy-link">Privacy Policy</a> | <a href="#" id="terms-link">Terms of Use</a></p>
    </footer>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/panzoom/9.4.0/panzoom.min.js"></script>
    <script src="script.js"></script>
</body>
</html>